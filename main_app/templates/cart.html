{% extends 'base.html' %}{% block content %}{% load cart_tag %}
<div class="Cart">
  <h3>Profile</h3>
  <div class=" container">
    <div class="table-responsive text-nowrap">
      <div>Total Item: {{request.session.cart|length}}</div>
      <div>
        <button><a href="{% url 'cart_clear' %}">Clear Cart</a></button>
      </div>
      <table class="table">
        <thead>
          <tr>
            <th style="width: 10%"></th>
            <th style="width: 18%">Product name</th>
            <th style="width: 17%">Price</th>
            <th style="width: 10%">Quantity</th>
            <th style="width: 5%"></th>
            <th style="width: 5%"></th>
            <th style="width: 5%">Total</th>
            <th style="width: 5%"></th>
          </tr>
        </thead>
        <form action="/checkout/" method="POST" enctype="multipart/form-data">
          {% for key,value in request.session.cart.items %}
          <tbody>
            <tr>
              {% csrf_token %}
              <td>
                <img style="max-height: 150px; max-width: 150px" src="{{value.image}}" />
              </td>
              <td>{{value.name}}</td>
              <td>${{value.price}}</td>
              <td>{{value.quantity}}</td>
              <td>
                {%if value.quantity > 1%}

                <a href="{% url 'item_increment' value.product_id %}" class="plus">+</a>
              </td>
              <td>
                <a href="{% url 'item_decrement' value.product_id %}" class="minus">-</a>
              </td>
              {% else %}
              <td>
                <a href="{% url 'item_increment' value.product_id %}" class="plus">+</a>
              </td>
              <td>
                <a 
              href="{% url 'item_decrement' value.product_id %}" class="minus" >-</a>
              </td>
              <td>$
                {{ value.price|multiply:value.quantity }}
              </td>
              <td>
                <a href="{% url 'item_clear' value.product_id %}" class="remove">X</a>
              </td>
            </tr>
            {%endif%}
          </tbody>
          {% endfor %}
      </table>
    </div>
  </div>
  <button type="submit">Checkout</button>
  </form>
</div>
{% endblock %}